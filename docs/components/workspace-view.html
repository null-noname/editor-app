<div class="workspace-header">
    <div class="workspace-back-row">
        <button class="btn-retro small back" onclick="closeWorkspace()">TOP画面に戻る</button>
    </div>
    <div class="workspace-tabs-container">
        <button id="tab-info" class="ws-tab" onclick="switchWorkspaceTab('info')">作品情報</button>
        <button id="tab-editor" class="ws-tab active" onclick="switchWorkspaceTab('editor')">執筆</button>
        <button id="tab-memo" class="ws-tab" onclick="switchWorkspaceTab('memo')">メモ</button>
    </div>
</div>

<div class="workspace-main">
    <!-- Tab: Editor (2-Pane Layout) -->
    <div id="ws-content-editor" class="workspace-tab-content active">
        <div class="workspace-container">
            <!-- Left Pane: Chapter List -->
            <div class="editor-sidebar">
                <div class="sidebar-header">
                    <span class="gold">話一覧</span>
                    <button class="btn-icon save" onclick="addNewChapter()">＋追加</button>
                </div>
                <div id="chapter-list"></div>
            </div>

            <!-- Right Pane: Editor Content -->
            <div class="editor-main">
                <div class="editor-toolbar">
                    <button class="btn-icon back" onclick="toggleVerticalMode()">縦/横</button>
                    <button class="btn-icon back" onclick="insertRuby()">ルビ(R)</button>
                    <button class="btn-icon back" onclick="insertDash()">ダッシュ(D)</button>
                    <button class="btn-icon save" onclick="saveCurrentChapter()">保存</button>
                    <span id="editor-char-count">0 字</span>
                </div>
                <textarea id="main-editor" placeholder="物語を始めましょう..."></textarea>
            </div>
        </div>
    </div>

    <!-- Tab: Work Information -->
    <div id="ws-content-info" class="workspace-tab-content">
        <div id="ws-info-container" style="height:100%; overflow-y:auto; padding:20px;">
        </div>
    </div>

    <!-- Tab: Memos -->
    <div id="ws-content-memo" class="workspace-tab-content">
        <!-- Memo List View -->
        <div id="memo-list-view" class="memo-pane-container active-subview">
            <div class="memo-actions-bar"
                style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <button id="memo-new-btn" class="btn-memo-add"
                    style="background:var(--clr-add); color:#fff; border:none; padding:8px 16px; border-radius:4px; font-weight:bold; cursor:pointer;">＋
                    新しいメモを追加</button>
            </div>

            <!-- Filter Bar -->
            <div id="memo-filter-bar" style="margin-bottom:15px; display:flex; flex-wrap:wrap; gap:8px;"></div>

            <!-- Memo List Container -->
            <div id="memo-list-container" class="memo-list-container"></div>
        </div>

        <!-- Memo Edit View -->
        <div id="memo-edit-view" class="memo-edit-pane hidden" style="display:none;">
            <div class="memo-edit-header"
                style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px;">
                <button class="btn-retro small back" style="background:#444;"
                    onclick="if(window.plotter_closeMemoEditor) window.plotter_closeMemoEditor()">＜ 戻る</button>
                <div class="memo-edit-actions" style="display:flex; gap:10px;">
                    <button class="btn-retro small save" style="background:var(--clr-save);">保存</button>
                </div>
            </div>
            <div style="display:flex; flex-direction:column; gap:10px;">
                <input type="text" id="memo-title" class="input-retro" placeholder="タイトルを入力..."
                    style="width:100%; padding:10px; background:#111; color:#fff; border:1px solid #444; border-radius:4px; font-size:1.1rem;">
                <input type="text" id="memo-tags" class="input-retro" placeholder="タグ (カンマ区切り)..."
                    style="width:100%; padding:8px; background:#111; color:#ccc; border:1px solid #444; border-radius:4px; font-size:0.9rem;">
                <textarea id="memo-content" class="textarea-retro" placeholder="内容を入力..."
                    style="width:100%; min-height:300px; padding:10px; background:#111; color:#ddd; border:1px solid #444; border-radius:4px; font-size:1rem; line-height:1.6; resize:vertical;"></textarea>
            </div>
        </div>
    </div>
</div>